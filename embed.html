<!DOCTYPE html>
<html lang="en-US">
<head>
	<!-- Inspired by https://steveoni.github.io/v4/ -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0">
	<meta name="author" content="Zane Wesley">
	<meta name="description" content="The place where you can find all of Zane's apps and projects.">
	<!-- General -->
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#0a192f">
	<meta name="application-name" content="Zane's Apps">
	<link rel="shortcut icon" href="images/icon.png">
	<link rel="icon" type="image/png" sizes="500x500" href="images/icon.png">
	<link rel="canonical" href="https://www.zanewesley.github.io">
	<!-- Apple -->
	<meta name="apple-mobile-web-app-title" content="Zane's Apps">
	<meta name="apple-mobile-web-app-status-bar-style" content="#0a192f">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="apple-touch-icon" sizes="500x500" href="images/icon.png">
	<link rel="mask-icon" href="images/icon.png" color="#0a192f">
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.0.0/css/all.css" crossorigin="anonymous"/>
	<!-- Analytics -->
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-YEEGMG5QT7"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'G-YEEGMG5QT7');
	</script>

	<title>Zane's Apps | Embed Player</title>

	<style>
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
			/*overflow-x: hidden;*/
			transition: all 0.25s cubic-bezier(0.645,0.045,0.355,1);
		}
		html, body {
			scroll-behavior: smooth;
			background-color: #0a192f;
			font-family: 'Roboto', sans-serif;
			width: 100%;
			height: auto;
			font-size: 20px;
			/*color: #8892b0; -- dark*/
			color: #ccd6f6;/*-- light*/
			/*color: #64d1ff; -- blue*/
		}

		/* width */
		::-webkit-scrollbar {
		  width: 12px;
		}

		/* Track */
		::-webkit-scrollbar-track {
		  background: #0a192f;
		}

		/* Handle */
		::-webkit-scrollbar-thumb {
		  background: #ccd6f6;
		  border-radius: 10px;
		  border: 3px solid #0a192f;
		}

		/* Handle on hover */
		::-webkit-scrollbar-thumb:hover {
		  background: #8892b0;
		}
		/* WebKit/Blink Browsers */
		::selection {
		  background: #233554;
		  color: #fff;
		}
		/* Gecko Browsers */
		::-moz-selection {
		  background: #233554;
		  color: #fff;
		}
		#standalone-frame {
			position: fixed;
			overflow-x: hidden;
			overflow-y: auto;
			left: 0;
			top: 50px;
			width: 100%;
			height: calc(100% - 50px);
			max-width: 100%;
			max-height: calc(100% - 50px);
			border: none;
			z-index: 3;
			user-select: none;
			-webkit-user-select: none;
		}
		#standalone-nav {
			position: fixed;
			z-index: 3;
			left: 0;
			top: 0;
			width: 100%;
			height: 50px;
			color: #fff;
			font-size: 1.5em;
			background-color: #0a192f;
			padding: 12px;
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			align-items: center;
			overflow: hidden;
			transition: all 0.3s;
		}
		.icon {
			cursor: pointer;
		}
		#standalone-nav .icon:hover {
			color: #ccc;
		}
		#standalone-nav .username-wrapper {
			font-size: 0.5em;
		}
		.standalone-title, #standalone-nav .username-wrapper {
			color: #ccd6f6;
			max-width: 50%;
			text-overflow: ellipsis;
			overflow: hidden;
			white-space: nowrap;
		}
		.standalone-title:hover {
			color: #fff;
			cursor: pointer;
		}
		.standalone-icons {
			color: #64d1ff;
		}
		#standalone-bg {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: #fff;
			z-index: 2;
		}
		/*#usernameBox {
			position: fixed;
			right: 0;
			top: 0;
			background-color: rgba(35, 53, 84, 0.7);
			padding: 0.5em 1em;
			animation: fadeIn 3s linear;
			z-index: 3;
		}
		#usernameBox .head {
			font-size: 0.5em;
		}*/
		.popup {
			position: fixed;
			/*top: 50%;*/
			bottom: 1em;
			left: 50%;
			/*transform: translate(-50%, -50%);*/
			transform: translateX(-50%);
			width: 50%;
			padding: 1em;
			height: auto;
			/*min-height: 50%;*/
			padding-bottom: 3em;
			background-color: #64d1ff;
			background: linear-gradient(169deg, rgba(100,209,255,1) 9%, rgba(10,25,47,1) 100%);
			color: #0a192f;
			border-radius: 20px;
			display: none;
			z-index: 3;
		}
		.popup.open {
			display: block;
		}
		.popup h2 {
			text-align: center;
		}
		.popup input {
			padding: 15px 30px;
		    border-radius: 8px;
		    border: none;
		    color: #0a192f;
		    background-color: #fff;
		    margin: 20px 0;
		    outline: none;
		}
		.popup button {
			padding: 15px 30px;
			border-radius: 8px;
			border: none;
			color: #ccd6f6;
			background-color: #0a192f;
			outline: none;
			cursor: pointer;
		}
		.popup button#nothanks {
			position: absolute;
			bottom: 1em;
			right: 1em;
		}
		.popup #save-loader {
			display: none;
		}

		#splash {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 900;
			background-color: #0a192f;
		}
		#splash svg {
		  position: absolute;
		  top:50%;
		  left: 50%;
		  transform: translate(-50%, -50%);
		  height: 50%;
		  background: transparent;
		}
		#splash svg path {
		  animation-duration: 1s;
		  animation-name: pulse;
		  animation-iteration-count: infinite;
		  color: #64d1ff;/*40c456*/
		}
		#splash svg path.path-7 {
		  animation-delay: -1s;
		}
		#splash svg path.path-6 {
		  animation-delay: -0.875s;
		}
		#splash svg path.path-5 {
		  animation-delay: -0.75s;
		}
		#splash svg path.path-4 {
		  animation-delay: -0.625s;
		}
		#splash svg path.path-3 {
		  animation-delay: -0.5s;
		}
		#splash svg path.path-2 {
		  animation-delay: -0.375s;
		}
		#splash svg path.path-1 {
		  animation-delay: -0.25s;
		}
		#splash svg path.path-0 {
		  animation-delay: -0.125s;
		}

		@keyframes pulse {
		  0% {
		    opacity: 0.1;
		  }
		  30% {
		    opacity: 0.8;
		  }
		  100% {
		    opacity: 0.1;
		  }
		}

		@media (max-width: 480px) {
			.popup {
				width: 90%;
			}
			.popup input {
				width: 100%;
			}
		}
	</style>
</head>
<body>
	<iframe id="standalone-frame" class="standalone-ui" src=""></iframe>

	<div id="standalone-nav" class="standalone-ui monospace">
		<!--<div class="standalone-icons">
			<span id="standalone-home" class="icon fa-regular fa-house"></span>
			<span id="standalone-share" class="icon fa-regular fa-share"></span>
		</div>-->
		<div class="standalone-title">Zane's Apps</div>
		<div class="username-wrapper">Username: <span id="usernameBox">Guest</span></div>
	</div>

	<!--<div id="usernameBox">
		<div class="head">Username:</div>
		<div class="user"></div>
	</div>-->

	<div id="standalone-bg" class="standalone-ui"></div>

	<div id="splash">
		<svg viewBox="0 0 866 866" xmlns="http://www.w3.org/2000/svg">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 164.83 151.5">
                <path class="path-0" d="M117.24,69.24A8,8,0,0,0,115.67,67c-4.88-4-9.8-7.89-14.86-11.62A4.93,4.93,0,0,0,96.93,55c-5.76,1.89-11.4,4.17-17.18,6a4.36,4.36,0,0,0-3.42,4.12c-1,6.89-2.1,13.76-3,20.66a4,4,0,0,0,1,3.07c5.12,4.36,10.39,8.61,15.68,12.76a3.62,3.62,0,0,0,2.92.75c6.29-2.66,12.52-5.47,18.71-8.36a3.49,3.49,0,0,0,1.68-2.19c1.34-7.25,2.54-14.55,3.9-22.58Z"
                    fill="#64d1ff" />
                <path class="path-1" d="M97.55,38.68A43.76,43.76,0,0,1,98,33.44c.41-2.36-.5-3.57-2.57-4.64C91.1,26.59,87,24,82.66,21.82a6.18,6.18,0,0,0-4-.71C73.45,22.55,68.32,24.25,63.22,26c-3.63,1.21-6.08,3.35-5.76,7.69a26.67,26.67,0,0,1-.6,4.92c-1.08,8.06-1.08,8.08,5.86,11.92,3.95,2.19,7.82,5.75,11.94,6.08s8.76-2.41,13.12-3.93c9.33-3.29,9.33-3.3,9.78-14Z"
                    fill="#64d1ff" />
                <path class="path-2" d="M66.11,126.56c5.91-.91,11.37-1.7,16.81-2.71a3.3,3.3,0,0,0,1.87-2.17c1-4.06,1.73-8.19,2.84-12.24.54-2-.11-3-1.55-4.15-5-4-9.9-8.12-15-12a6.19,6.19,0,0,0-4.15-1.1c-5.35.66-10.7,1.54-16,2.54A4,4,0,0,0,48.34,97a109.13,109.13,0,0,0-3,12.19,4.47,4.47,0,0,0,1.34,3.6c5.54,4.36,11.23,8.53,16.91,12.69a10.84,10.84,0,0,0,2.57,1.11Z"
                    fill="#64d1ff" />
                <path class="path-3" d="M127.42,104.12c4.1-2.1,8-3.93,11.72-6a6,6,0,0,0,2.27-3,58.22,58.22,0,0,0,3.18-29.92c-.26-1.7-8-7.28-9.71-6.85A5,5,0,0,0,133,59.65c-2.81,2.49-5.71,4.88-8.33,7.56a9.46,9.46,0,0,0-2.47,4.4c-1.29,6.49-2.38,13-3.35,19.55a5.73,5.73,0,0,0,.83,3.91c2.31,3.08,5,5.88,7.7,9Z"
                    fill="#64d1ff" />
                <path class="path-4" d="M52.58,29.89c-2.15-.36-3.78-.54-5.39-.9-2.83-.64-4.92.1-7,2.32A64.1,64.1,0,0,0,26.09,54.64c-2.64,7.92-2.62,7.84,5.15,10.87,1.76.69,2.73.45,3.93-1C39.79,59,44.54,53.65,49.22,48.2a4.2,4.2,0,0,0,1.13-2c.8-5.32,1.49-10.68,2.24-16.34Z"
                    fill="#64d1ff" />
                <path class="path-5" fill="#64d1ff" d="M23,68.13c0,2.51,0,4.7,0,6.87a60.49,60.49,0,0,0,9.75,32.15c1.37,2.13,6.4,3,7,1.2,1.55-5,2.68-10.2,3.82-15.34.13-.58-.58-1.38-.94-2.06-2.51-4.77-5.47-9.38-7.45-14.37C32.94,71,28.22,69.84,23,68.13Z" />
                <path class="path-6" fill="#64d1ff" d="M83.91,12.86c-.32.36-.66.71-1,1.07.9,1.13,1.57,2.62,2.73,3.33,4.71,2.84,9.56,5.48,14.39,8.1a9.29,9.29,0,0,0,3.13.83c5.45.69,10.89,1.38,16.35,1.94a10.41,10.41,0,0,0,3.07-.71c-11.48-9.9-24.26-14.61-38.71-14.56Z"
                />
                <path class="path-7" fill="#64d1ff" d="M66.28,132.51c13.36,3.78,25.62,3.5,38-.9C91.68,129.59,79.36,128,66.28,132.51Z" />
                <path class="path-8" fill="#64d1ff" d="M127.2,30.66l-1.27.37a18.58,18.58,0,0,0,1,3.08c3,5.52,6.21,10.89,8.89,16.54,1.34,2.83,3.41,3.82,6.49,4.9a60.38,60.38,0,0,0-15.12-24.9Z" />
                <path class="bb-9" fill="#64d1ff" d="M117.35,125c5.58-2.32,16.9-13.84,18.1-19.2-2.41,1.46-5.18,2.36-6.78,4.23-4.21,5-7.89,10.37-11.32,15Z" />
            </svg>
        </svg>
	</div>

	<div class="popup">
		<h2>Want to Get Recognized?</h2>
		<p>Enter a username below to associate with your scores on the leaderboard!</p>
		<input type="text" id="username" placeholder="Username" class="monospace">
		<button id="nothanks">No Thanks</button>
		<button id="saveuser">Save Username</button>
		<img id="save-loader" src="images/game-loader.svg" alt="Saving username loader">
	</div>

	<script src="leaderboard-handler.js"></script>

	<script>

		document.body.onload = function() {
			setTimeout(function() {
				document.getElementById('splash').style.display='none';
			}, 1000);
		}

		var leaderboardName = localStorage.getItem('z_leaderboard_username');
		if(!leaderboardName) {
			leaderboardName = 'Guest-'+__makeId__(5);
			setTimeout(function() {
				document.querySelector('.popup').classList.add('open');
			}, 5000);
		}
		document.getElementById('usernameBox').innerHTML = leaderboardName;

		function loadIFrame(url) {
			var iFrame = document.getElementById('standalone-frame');
			iFrame.src=url;
			var fdt = iFrame.contentWindow.document.title;
			if(fdt) document.title = fdt;
			console.log(fdt);
		}

		/*document.getElementById('standalone-frame').addEventListener("DOMAttrModified", function(event) {
		    if (event.attrName == "src") {
		       // The "src" attribute changed
		       document.title = document.getElementById('standalone-frame').contentDocument.title;
		       console.log('iframe url changed');
		    }
		});*/

		let params = new URLSearchParams(document.location.search);
		let dataUrl = params.get("data-url");
		if(dataUrl) {
			loadIFrame(dataUrl);
		} else {
			loadIFrame('/');
		}

		document.getElementById('nothanks').addEventListener('click', function(e) {
			e.preventDefault();
			this.parentNode.classList.remove('open');
		});

		document.getElementById('saveuser').addEventListener('click', function(e) {
			e.preventDefault();
			setUsername();
			//this.parentNode.classList.remove('open');
		});

		document.querySelector('.standalone-title').addEventListener('click', function(e) {
			window.location = '/';
		});

		function setUsername() {
			if(document.getElementById('username').value != "" && document.getElementById('username').value != null) {
				document.querySelectorAll('h2, p, input, button').forEach(function(elem) {
					elem.style.display="none";
				});
				document.getElementById('save-loader').style.display="block";
				localStorage.setItem('z_leaderboard_username', String(document.getElementById('username').value));
				setTimeout(function() {
					document.querySelector('.popup').classList.remove('open');
					displayUsername(String(document.getElementById('username').value));
					leaderboardName = String(document.getElementById('username').value);
					document.getElementById('usernameBox').innerHTML = leaderboardName;
				}, 3000);
			} else {
				document.querySelector('.popup p').innerHTML="Please enter a valid username.";
			}
		}

		function displayUsername(user) {
			document.getElementById('usernameBox').innerHTML=user;
		}
	</script>
</body>
</html>
