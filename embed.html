<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0">
	<meta name="author" content="Zane Wesley">
	<meta name="description" content="The place to find all of Zane's games and projects.">
	<!-- General -->
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#0e0e0e">
	<meta name="application-name" content="Zane Wesley">
	<link rel="shortcut icon" href="images/icon.png">
	<link rel="icon" type="image/png" sizes="500x500" href="images/icon.png">
	<!-- Apple -->
	<meta name="apple-mobile-web-app-title" content="Zane Wesley">
	<meta name="apple-mobile-web-app-status-bar-style" content="#0e0e0e">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="apple-touch-icon" sizes="500x500" href="images/icon.png">
	<link rel="mask-icon" href="images/icon.png" color="#0e0e0e">
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@300;400;500&family=Bebas+Neue&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.5.2/css/all.css">
	<!-- Analytics -->
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-YEEGMG5QT7"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'G-YEEGMG5QT7');
	</script>

	<title>Zane Wesley | Embed Player</title>

	<style>
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
			transition: all 0.25s cubic-bezier(0.645,0.045,0.355,1);
			font-family: 'Roboto', sans-serif;
		}
		html, body {
			scroll-behavior: smooth;
			background-color: #0e0e0e;
			width: 100%;
			height: auto;
			font-size: 20px;
			color: #ffffff;
		}

		/* width */
		::-webkit-scrollbar {
		  width: 12px;
		}

		/* Track */
		::-webkit-scrollbar-track {
		  background: #0e0e0e;/*#0a192f*/
		}

		/* Handle */
		::-webkit-scrollbar-thumb {
		  background: rgba(255, 255, 255, 0.7);/*#ccd6f6;*/
		  border-radius: 10px;
		  border: 3px solid #0e0e0e;/*#0a192f*/;
		}

		/* Handle on hover */
		::-webkit-scrollbar-thumb:hover {
		  background: #8892b0;
		}
		/* WebKit/Blink Browsers */
		::selection {
		  background: rgba(57, 73, 86, 0.7);/*#233554*/
		  color: #fff;
		}
		/* Gecko Browsers */
		::-moz-selection {
		  background: rgba(57, 73, 86, 0.7);/*#233554*/
		  color: #fff;
		}

		#standalone-frame {
			position: fixed;
			overflow-x: hidden;
			overflow-y: auto;
			left: 0;
			top: 50px;
			width: 100%;
			height: calc(100% - 50px);
			max-width: 100%;
			max-height: calc(100% - 50px);
			border: none;
			z-index: 3;
			user-select: none;
			-webkit-user-select: none;
		}
		#standalone-nav {
			position: fixed;
			z-index: 3;
			left: 0;
			top: 0;
			width: 100%;
			height: 50px;
			color: #fff;
			font-size: 1.5em;
			background-color: #0e0e0e;
			padding: 12px;
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			align-items: center;
			overflow: hidden;
			transition: all 0.3s;
			box-shadow: 0 10px 30px -10px rgb(2 12 27 / 70%);
		}
		.bottom-nav #standalone-frame {
			top: 0;
		}
		.bottom-nav #standalone-nav {
			top: auto;
			bottom: 0;
		}
		.standalone-title, .username-wrapper {
			color: #fff;
			max-width: 50%;
			text-overflow: ellipsis;
			overflow: hidden;
			white-space: nowrap;
		}
		.standalone-title:hover {
			color: #fff;
			cursor: pointer;
		}
		.standalone-title .title-text {
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 20px;
			color: #fff;
		}
		.standalone-title .title-text img {
			width: 50px;
			height: 50px;
			object-fit: cover;
		}
		.standalone-title .title-icon {
			display: none;
			font-size: 0.75em;
		}
		.icons-wrapper i {
			color: #fff;
			cursor: pointer;
			margin-right: 0.5em;
		}
		.icons-wrapper i:hover {
			color: #fff;
		}
		#leaderboardBtn {
			cursor: pointer;
			font-size: 0.75em;
		}

		.username-wrapper {
			padding: 12px;
			cursor: pointer;
		}
		.username-wrapper .inner {
		    background-color: rgb(57, 73, 86, 0.7);
		    padding: 5px 14px;
		    border-radius: 16px;
		    font-size: 16px;
		}
		.username-wrapper i {
			padding-right: 6px;
		}
		
		#standalone-bg {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: #fff;
			z-index: 2;
		}


		#splash {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 900;
			/*background-color: #0e0e0e;*/
			background-color: #1e3041;
			animation: fadeIn 0.3s ease;
		}
		#splash .svg-wrapper {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			height: 50%;
			animation: fadeIn 1s;
		}
		#splash svg, #splash img {
			width: 50vh;
			height: 50vh;
		}
		#splash svg .mainCircle {
			stroke-dasharray: 1524;
			stroke-dashoffset: 1525;
			transition: all 1s;
		}
		#splash svg.load .mainCircle {
			animation: loadAnim 1s ease-in-out forwards;
		}
		#splash svg.loaded .mainCircle {
			stroke-dashoffset: 0;
		}
		#splash svg .z {
			stroke-dasharray: 1444;
			stroke-dashoffset:1445;
		}
		@keyframes loadAnim {
			100% {stroke-dashoffset: 30;}
		}
		#splash .loader-bar-wrapper {
			background-color: rgba(57, 73, 86, 0.7);
			width: 100%;
		}
		#splash .loader-bar-wrapper .loader-bar {
			background-color: #ffffff;/*#64d1ff;*/
			width: 0%;
			height: 30px;
			/*animation: load 5s ease-in;*/
		}
		@keyframes fadeIn {
			0% {opacity: 0;}
			100% {opacity: 1;}
		}
		@keyframes hover {
			0% {transform: translate(-10px);}
			30% {transform: translateY(-17px);}
			60% {transform: translate(10px);}
			100% {transform: translate(-10px);}
		}
		@keyframes load {
			0% {width: 0%;}
			100% {width:99.5%;}
		}

		@media (max-width: 480px) {
			.standalone-title .title-text {
			display: none;
			}
			.standalone-title .title-icon {
				display: block;
			}
		}
	</style>
</head>
<body>
	<iframe id="standalone-frame" class="standalone-ui" src=""></iframe>

	<div id="standalone-nav" class="standalone-ui">
		<div class="standalone-title"><span class="title-text"><img src="images/icon-v4-transparent-white.png"></span><span class="title-icon"><i class="fa-solid fa-house"></i></span></div>
		<div class="username-wrapper"><div class="inner"><i class="fa-solid fa-user"></i> <span id="usernameBox">No Username</span></div></div>
		<div class="icons-wrapper">
			<span id="leaderboardBtn"><i  class="fa-solid fa-ranking-star"></i></span>
		</div>
	</div>

	<div id="standalone-bg" class="standalone-ui"></div>

	<div id="splash">
		<div class="svg-wrapper">
			<img src="images/icon-v4-transparent-white.png">
			<div class="loader-bar-wrapper"><div class="loader-bar"></div></div>
		</div>
	</div>

	<script src="leaderboard-handler.js"></script>

	<script>

		loadBar();

		document.body.onload = function() {
			document.querySelector('.loader-bar').style.width='100%';
			setTimeout(function() {
				document.getElementById('splash').style.display='none';
			}, 1000);
		}

		var leaderboardName = localStorage.getItem('z_leaderboard_username');
		if(!leaderboardName) {
			leaderboardName = 'Guest-'+__makeId__(5);
		} else {
			document.getElementById('usernameBox').innerHTML = leaderboardName;
		}

		var navbarLocation = localStorage.getItem('z_navbar_location');
		if(navbarLocation == 'bottom') {
			document.body.classList.add('bottom-nav');
			document.getElementById('navbarToggle').checked='true';
		}


		function loadIFrame(url) {
			document.getElementById('splash').style.display='block';
			loadBar();
			var iFrame = document.getElementById('standalone-frame');
			iFrame.src=url;
			iFrame.onload = function() {
				document.querySelector('.loader-bar').style.width='100%';
				var fdt = iFrame.contentWindow.document.title;
				if(fdt) document.title = `${fdt}`;
				setTimeout(function() {
					document.getElementById('splash').style.display='none';
				}, 1000);
			};
		}

		function loadBar() {
			var i = 0;
			if (i == 0) {
			    i = 1;
			    var elem = document.querySelector(".loader-bar");
			    var width = 1;
			    var int = setInterval(moveBar, 10);
			    function moveBar() {
			    	if (width >= 95) {
			    		clearInterval(int);
			    		i = 0;
			    	} else {
			    		width = width+3;
			    		elem.style.width = width + "%";
			    	}
			    }
			}
		}

		let params = new URLSearchParams(document.location.search);
		let dataUrl = params.get("data-url");
		if(dataUrl) {
			loadIFrame(dataUrl);
		} else {
			loadIFrame('/');
		}


		document.querySelector('.standalone-title').addEventListener('click', function(e) {
			window.location = '/';
		});

		function displayUsername(user) {
			document.getElementById('usernameBox').innerHTML=user;
		}

		document.getElementById('leaderboardBtn').addEventListener('click', function(e) {
			e.preventDefault();
			loadIFrame('leaderboard');
		});
		document.querySelector('.username-wrapper').addEventListener('click', function(e) {
			e.preventDefault();
			loadIFrame('leaderboard#showUser');
		});
	</script>
</body>
</html>